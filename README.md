# テスト駆動開発

テスト駆動開発(TDD)はおおよそ以下の順で、繰り返しテスト＋コードを追加していく開発スタイルです。

1. 失敗するテストを書く
2. テストがパスするようにコードを書く
3. テストがパスする範囲でコードを修正する

---

## 作るもの(最初)

まずは以下の仕様を実行していきます。  
今回はTDDで開発するため、まずはテストを書きます。  

* max() という関数を作る
* 2つの引数(数字)を取ってきて、大きい方を返す
 * 例えば、max(3, 5) → 5、max(-2, 4) → 4 という感じ

```perl
use Test::More;

is max(3,5), 5;
is max(-2,4), 4;

done_testing;
```

うまく動作するようになったら、次に進みます。  

---

## 作るもの(次)

次に、引数が2個以外の時でも動作するように変更します。  
ここでのポイントは、過去のテストは消さない事です。  
これにより、過去できていたことはそのままに、機能を追加することができます。  

* max()の引数を3個以上でもOKとする
* max()の引数が1つだった場合でもOKとする
 * 例えば、max(1,2,3) → 3、max(5) → 5 という感じ

```perl
use Test::More;

is max(3,5), 5;
is max(-2,4), 4;

# 追加したテスト
is max(1,2,3), 3;
is max(5), 5;

done_testing;
```

---

## 作るもの(さらに次)

引数が無ければ、"error"という文字列を返すように変更します。  
過去できていたことはそのままに、機能を追加していきましょう。  


---

## その他メモ

- テストのファイルは、`t/*.t`という名前で作成する
- ライブラリは、`lib/`以下に`**.pm`という名前で作成する
 - その際、`Max.pm`とか`MyMax.pm`というようなCamelケースで書く
- `lib/Max.pm`だったら、`package Max;`と書く
 - `lib/Sample/Min.pm`だったら、`package Sample::Min;`と書く
- `use Max;`で、作成したモジュールをuseする
- `$ perl -Ilib t\max.t`というように、`-Ilib`を追加してperl実行する

---

## その後の進め方

Max::maxを使ったスクリプトを作成する。

---

## 質問

- 同じ値が入力されたらどうなるのか？
 - 意図通り正しく動く
- minilって何？
  - tokuhirom++ なperlスクリプトです  
    モジュール作成のひな形を作れます  
    cpanm Minilla でインストールできます  
    その後は、`minil new Max` とかで雛形を作れます  
